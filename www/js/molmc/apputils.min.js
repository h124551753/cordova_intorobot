var serverURL="http://www.intorobot.com",serverMQTT="iot.intorobot.com",fileSystemRoot,fileSystemWidget;
(function(f){var g=function(){document.addEventListener("backbutton",q,!1);document.addEventListener("resume",m,!1);document.addEventListener("pause",r,!1)},k=!0,m=function(){setTimeout(function(){k=!0},300)},r=function(){k=!1},l="",n;f(document).on("popshow",function(c){l=c.data[0]});f(document).on("pophide",function(){l=""});var q=function(){if(0!=k){var c=window.location.href.split("#");""!==l?l.hide():"device"==c[1]||"explore"==c[1]||"graphic"==c[1]||"about"==c[1]||void 0===c[1]&&"true"===f.molmc.utils.getItem("autoLogin")?
(f.ui.clearHistory(),2E3<Date.now()-n||void 0===n?(p(_lang("utils_exit")),setTimeout(function(){var a=document.getElementById("exitTipWarp");a&&document.body.removeChild(a)},2E3),n=Date.now()):(navigator.app.clearCache(),navigator.app.exitApp())):void 0==c[1]||"login"==c[1]?f.molmc.utils.exitApp():"register_phone"==c[1]||"register"==c[1]?f.os.android&&f.ui.loadContent("#login",!0,!0,"slide"):f.ui.goBack()}},p=function(c,a){a=void 0===a?"180px":a+"px";var b=document.getElementById("exitTipWarp");if("undefined"===
typeof b||null===b)b=document.createElement("div"),b.id="exitTipWarp",b.style.display="block",b.style.position="absolute",b.style.textAlign="center",b.style.width="100%",b.style.zIndex=99999,b.style.left="0px",b.style.bottom="100px",document.body.appendChild(b);var d=document.getElementById("exitTip");if("undefined"===typeof d||null===d)d=document.createElement("div"),d.id="exitTip",d.style.display="block",d.style.width=a,d.style.height="35px",d.style.lineHeight="35px",d.style.borderWidth="0px",d.style.borderRadius=
"10px",d.style.boxShadow="0 0 20px #000",d.style.fontSize="16px",d.style.backgroundColor="#000",d.style.color="#fff",d.style.margin="0 auto",d.style.opacity="0.7",b.appendChild(d);d.innerHTML=c};g.prototype={u_Topic:"",u_TimeStamp:"",appVersion:"",checkNetwork:function(){var c=window.location.href.split("#");if(this.getItem("autoLogin")&&void 0===c[1]||navigator.network.connection.type!=Connection.NONE)return!0;f.molmc.utils.showToast(_lang("utils_tips_link"),280,3E3);return!1},checkWifi:function(c){return navigator.network.connection.type!==
Connection.WIFI?(c||navigator.notification.confirm(_lang("utils_tips_wifi"),function(a){},_lang("tips_title_tips"),_lang("g_tips_confirm")),!1):!0},setItem:function(c,a){localStorage.setItem(c,a)},getItem:function(c){return localStorage.getItem(c)},clearItem:function(c){return localStorage.removeItem(c)},getTimestamp:function(){return Date.parse(new Date)/1E3},getDate:function(c){return(new Date(1E3*parseInt(c))).toLocaleString().replace(/\u5e74|\u6708/g,"-").replace(/\u65e5/g," ")},loadOut:function(c,
a){for(var b="js"==a?"src":"css"==a?"href":"none",d=document.getElementsByTagName("js"==a?"script":"css"==a?"link":"none"),e=d.length;0<=e;e--)if(d[e]&&null!=d[e].getAttribute(b)&&-1!=d[e].getAttribute(b).indexOf(c))return b=d[e].getAttribute(b),d[e].parentNode.removeChild(d[e]),b},getClientType:function(){return device.platform},getDeviceType:function(){return device.manufacturer+" "+device.model},getDeviceSystem:function(){return device.platform+" "+device.version},exitApp:function(){navigator.app.clearCache();
navigator.app.exitApp()},showToast:function(c,a,b){p(c,a);setTimeout(function(){var a=document.getElementById("exitTipWarp");a&&document.body.removeChild(a)},b)},checkEmail:function(c){return/^([\.a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(c)},checkPhone:function(c){return/^[1-9]\d*$/.test(c)},checkdevDespInput:function(c){return/^[\w\-\u4e00-\u9fa5\uFE30-\uFFA0\u3002\u3001,.\?!\s\']*$/g.test(c)},checkInput:function(c){return/^[\w\u4e00-\u9fa5]{1}[\w\-\u4e00-\u9fa5\uFE30-\uFFA0\u3002\u3001,.\?!\s\']*$/g.test(c)},
checkPassword:function(c){for(var a=function(a){return 48<=a&&57>=a?1:65<=a&&90>=a?2:97<=a&&122>=a?4:8},b=0,d=0;d<c.length;d++)b|=a(c.charCodeAt(d));return function(a){var b=0;for(d=0;4>d;d++)a&1&&b++,a>>>=1;return b}(b)},loadInJsCss:function(c,a){if("js"==a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",c)}else"css"==a&&(b=document.createElement("link"),b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",
c));"undefined"!=typeof b&&document.getElementsByTagName("head")[0].appendChild(b)},loadOutJsCss:function(c,a){for(var b="js"==a?"src":"css"==a?"href":"none",d=document.getElementsByTagName("js"==a?"script":"css"==a?"link":"none"),e=d.length;0<=e;e--)if(d[e]&&null!=d[e].getAttribute(b)&&-1!=d[e].getAttribute(b).indexOf(c))return b=d[e].getAttribute(b),d[e].parentNode.removeChild(d[e]),b},getLocation:function(c,a){var b=this;navigator.geolocation?(a&&f.ui.showMask(_lang("g_tips_loadmap")),navigator.geolocation.getCurrentPosition(function(a){f.ui.hideMask();
var b=a.coords.longitude;a={lat:Math.abs(a.coords.latitude),lng:Math.abs(b)};c(a)},function(a){f.ui.hideMask();if(f.os.android){switch(a.code){case a.TIMEOUT:null==b.getItem("localtionSetingFirst")|void 0==b.getItem("localtionSetingFirst")&&(b.setItem("localtionSetingFirst",!0),navigator.notification.confirm(_lang("g_getLocationErr"),function(a){},_lang("g_tips_warning"),_lang("g_tips_confirm")))}c({lng:116.331398,lat:39.897445})}else f.os.ios&&c()},{enableHighAccuracy:!1,timeout:5E3})):c({lng:116.331398,
lat:39.897445})},showWidgets:function(c,a,b){c.empty();if(void 0===a){var d;c.append(!0===b?'<div style="font-size: 1.5em;text-align: center;margin-top: 50%; color:darkgray; background: #F2F2F2;"><div><a href="#demo_device" class="fa fa-plus-circle" style="font-size: 4em;color: darkgray;margin-bottom:20px;" id=""></a></div><span>\u8bf7\u70b9\u51fb\u6dfb\u52a0\u63a7\u4ef6</span></div>':'<div style="margin:10px">\u6ca1\u6709\u627e\u5230\u76f8\u5173\u63a7\u4ef6</div>')}else if(0===a.length)c.append(!0===
b?'<div style="font-size: 1.5em;text-align: center;margin-top: 50%; color:darkgray; background: #F2F2F2;"><div><a href="#" class="fa fa-plus-circle" style="font-size: 4em;color: darkgray;margin-bottom:20px;" id=""></a></div><span>\u8bf7\u70b9\u51fb\u6dfb\u52a0\u63a7\u4ef6</span></div>':'<div style="margin:10px">\u6ca1\u6709\u627e\u5230\u76f8\u5173\u63a7\u4ef6</div>');else for(b=0;b<a.length;b++){d=fileSystemWidget+a[b].widget_id+"/img/ThumbS.png";var e=a[b].name,f=a[b].description,g="";_.isEmpty(a[b].retain)||
(g="BOOL"===a[b].topics[0].D_type?"1"==a[b].retain?_lang("g_on"):_lang("g_off"):a[b].retain+" "+a[b].topics[0].attribute.unit);d='<li id="'+b+'" ><div style="float:left"><img style="width:80px;height:80px;margin-top:-8px;border-radius:50%;" src="'+d+'"></div><div style="margin-left:90px;height:65px;"><h3 style="color:rgb(93,93,216);margin-top=-5px;">'+e+'</h3><h4 id="badge" style="color:rgb(42, 132, 197); margin-top:5px;">'+g+'</h4><h4 class="nowrap" style="color:gray;margin-top:5px;">'+f+"</h4></div></li>";
c.append(d)}},showDevices:function(c,a,b){if(0===a.length||void 0===a.length)a=window.location.href.split("#"),"device"===a[1]||void 0===a[1]?this.shownullDev(c,"mydev"):"collectdev_device"===a[1]?this.shownullDev(c,"mydev"):"graphic"===a[1]&&this.shownullDev(c,"graphic");else if(!_.isEmpty(a)&&(c.empty(),0!=a.length))for(var d=0,e=0;e<a.length;e++)if("listlabel"===a[e].typeofli){var h=' <li class="divider"><div><label style="width:auto;padding:3px 3px">'+a[e].tag+'</label><label class="fa fa-list" id="list'+
d+'" style="float:right;margin-right:-60px;padding:6px 20px" ></label><div style="clear:both"></div></div></li>';c.append(h);d++}else if("replylabel"===a[e].typeofli)h=' <li class="divider"><div><label style="width:auto;padding:3px 3px">'+a[e].tag+'</label><label class="fa fa-reply" id="list'+d+'" style="float:right;margin-right:-60px;padding:6px 20px" ></label><div style="clear:both"></div></div></li>',c.append(h),d++;else{if("text"===a[e].typeofli)h=' <li class="divider"><div><label style="width:auto;padding:3px 3px">'+
a[e].tag+'</label><div style="clear:both"></div></div></li>';else if("none"===a[e].typeofli)h="<li>"+_lang("explore_nodevice")+"</li>";else{var h=a[e].dev_img,g=a[e].name,k=a[e].city,l=a[e].description,m="";f.molmc.device.getisCollectDevs(a[e]._id)&&(m='<span class="af-badge" style="margin-top:38px;color:red;" ><a class="fa fa-heart"></a></span>');/^[^\/]+/.test(h)&&(h="/"+h);h=_.isEmpty(b)||!0!==b.flag_collect?_.isEmpty(b)||!1!==b.img?'<li id="'+e+'"><div style="float:left"><img style="width:80px;height:80px;margin-top:-8px;border-radius:50%;" src="'+
serverURL+h+'"></div><div style="margin-left:90px;height:65px;"><h3 style="color:rgb(93,93,216);margin-top:-5px;width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+g+'</h3><h4 class="nowrap"  style="color:gray;margin-top:5px;">'+l+'</h4><h4 style="color:rgb(42, 132, 197);margin-top:5px;margin-left:5px;"><span class="icon location" style="margin:-5px;"></span>'+k+'</h4><span class="af-badge" style="margin-top:10px;"><a class="link fa fa-exclamation-circle"></a></span><span class="af-badge" style="margin-top:40px;"><a class="fa fa-wifi"></a></span><span class="af-badge br" style="margin-bottom:10px;"><a class="share fa fa-share-alt"></a></span></span></div></li>':
'<li id="'+e+'"><div style="height:65px;"><h3 style="color:rgb(93,93,216);margin-top:-5px;width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+g+'</h3><h4 class="nowrap"  style="color:gray;margin-top:5px;">'+l+'</h4><h4 style="color:rgb(42, 132, 197);margin-top:5px;margin-left:5px;"><span class="icon location" style="margin:-5px;"></span>'+k+'</h4><span class="af-badge" style="margin-top:10px;"><a class="fa fa-exclamation-circle"></a></span><span class="af-badge" style="margin-top:40px;"><a class="fa fa-wifi"></a></span><span class="af-badge br" style="margin-bottom:10px;"><a class="fa fa-share-alt"></a></span></span></div></li>':
'<li id="'+e+'"><div style="float:left"><img style="width:80px;height:80px;margin-top:-8px;border-radius:50%;" src="'+serverURL+h+'"></div><div style="margin-left:90px;height:65px;"><h3 style="color:rgb(93,93,216);margin-top:-5px;width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+g+'</h3><h4 class="nowrap"  style="color:gray;margin-top:5px;">'+l+'</h4><h4 style="color:rgb(42, 132, 197);margin-top:5px;margin-left:5px;"><span class="icon location" style="margin:-5px;"></span>'+
k+'</h4><span class="af-badge" style="margin-top:10px;"><a class="link fa fa-wifi"></a></span>'+m+'<span class="af-badge br" style="margin-bottom:10px;"><a class="share fa"></a></span></span></div></li>'}c.append(h)}},shownullDev:function(c,a){var b,d;"collect"===a?(d="explore",b=_lang("g_colldev_empty")):"mydev"===a?(d="",b=_lang("g_device_empty")):"graphic"===a&&(d="createRecicp_graphic",b=_lang("g_graphic_empty"));c.empty();c.append('<div style="font-size: 1.5em;text-align: center;margin-top: 50%; color: darkgray; background: #F2F2F2;"><div><a href="#'+
d+'" class="fa fa-plus-circle" style="font-size: 4em;color: darkgray;margin-bottom:20px;" id="addDeviceEmpty"></a></div><span>'+b+"</span></div>")},setpopup:function(c,a){l=c}};f.molmc.utils=new g})(af);var _G_LANG,g_lang="zh";_G_LANG={zh:$.molmc.Lang._G_ZH,en:$.molmc.Lang._G_EN};var g_lang="zh",currentBrowserLanguage=navigator.language;currentBrowserLanguage||(currentBrowserLanguage=navigator.browserLanguage);
currentBrowserLanguage="zh-cn"==currentBrowserLanguage.toLowerCase()?"zh":"zh-tw"==currentBrowserLanguage.toLowerCase()||"zh-hk"==currentBrowserLanguage.toLowerCase()?"zht":"zh";
_lang=function(f){if("zh"==currentBrowserLanguage||"en"==currentBrowserLanguage)return _G_LANG[currentBrowserLanguage][f]?_G_LANG[currentBrowserLanguage][f]:f;if("g_lang_caption"==f)return"\u7e41\u9ad4\u4e2d\u6587";var g=_G_LANG.zh[f];if("object"==typeof g){var k=[];g.forEach(function(f){k.push(Traditionalized(f))});return k}return _G_LANG.zh[f]?Traditionalized(_G_LANG.zh[f]):f};
(function(f){var g=function(){},k=[{name:"\u4e2d\u56fd",code:"86"},{name:"Hong Kong",code:"852"},{name:"United States",code:"1"},{name:"United Kingdom",code:"44"},{name:"Argentina",code:"54"},{name:"Australia",code:"61"},{name:"Austria",code:"43"},{name:"Brazil",code:"55"},{name:"Canada",code:"1"},{name:"Chil",code:"56"},{name:"Colombia",code:"57"},{name:"Czech Republic",code:"420"},{name:"Egypt",code:"20"},{name:"Finland",code:"358"},{name:"France",code:"33"},{name:"Germany",code:"49"},{name:"Greece",
code:"30"},{name:"Greenland",code:"299"},{name:"Iceland",code:"354"},{name:"India",code:"91"},{name:"Indonesia",code:"62"},{name:"Iran",code:"98"},{name:"Ireland",code:"353"},{name:"Israel",code:"972"},{name:"Italy",code:"39"},{name:"Japan",code:"81"},{name:"Kazakhstan",code:"7"},{name:"Macau",code:"853"},{name:"Malaysia",code:"60"},{name:"Mexico",code:"52"},{name:"Netherlands",code:"31"},{name:"New Zealand",code:"64"},{name:"Nigeria",code:"234"},{name:"Norway",code:"47"},{name:"Peru",code:"51"},
{name:"Poland",code:"48"},{name:"Portugal",code:"351"},{name:"Romania",code:"40"},{name:"Russia",code:"7"},{name:"Saudi Arabia",code:"966"},{name:"Singapore",code:"65"},{name:"South Africa",code:"27"},{name:"South Korea",code:"82"},{name:"Spain",code:"34"},{name:"Sweden",code:"46"},{name:"Switzerland",code:"41"},{name:"Taiwan",code:"886"},{name:"Turkey",code:"90"}];g.prototype={getCode:function(){return k}};f.molmc.countryCode=new g})(af);
